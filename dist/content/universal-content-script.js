(()=>{"use strict";(()=>{const n="boltreply-universal-host",e="boltreply-float-btn",t='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="white"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>',o=chrome.runtime.getURL("icons/icon48.png"),r=chrome.runtime.getURL("icons/boltreplyainameicon.png");let i="",s=!1,a=!1,d="",l=0,c="",p="";function g(){const n=document.getElementById(e);n&&(n.style.display="none")}function u(n,e){n.querySelectorAll(".star").forEach((n,t)=>{t<e?n.classList.add("filled"):n.classList.remove("filled")})}function b(){const e=document.getElementById(n);if(!e?.shadowRoot)return;const t=e.shadowRoot.getElementById("boltreply-panel");t&&(t.classList.remove("open"),setTimeout(()=>{a=!1},250))}function m(n,e){const t=n.getElementById("br-credits");t&&(t.textContent=`${e} credits remaining`),chrome.storage.local.set({credits_remaining:e})}function f(n,e){s=e;const o=n.getElementById("br-generate"),r=n.getElementById("br-btn-label");o&&r&&(o.disabled=e,o.innerHTML=e?'<span class="spinner"></span><span id="br-btn-label">Generating...</span>':`${t}<span id="br-btn-label">Generate Reply</span>`)}function x(n,e){const t=n.getElementById("br-result-section"),o=n.getElementById("br-result");t&&(t.style.display="flex"),o&&(o.textContent=e),y(n)}function h(n,e){const t=n.getElementById("br-error-box");t&&(t.className="message-box error",t.textContent=e,t.style.display="block")}function y(n){const e=n.getElementById("br-result"),t=e?.textContent?.trim()||"";if(!t)return;const o=()=>{const e=n.getElementById("br-copy");if(!e)return;const t=e.innerHTML;e.innerHTML='\n        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">\n          <polyline points="20 6 9 17 4 12"/>\n        </svg>\n        Copied!\n      ',setTimeout(()=>{e.innerHTML=t},2e3)};navigator.clipboard.writeText(t).then(o).catch(()=>{const n=document.createElement("textarea");n.value=t,n.style.cssText="position:fixed;top:-9999px;left:-9999px;opacity:0;",document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),o()})}chrome.runtime.onMessage.addListener((e,t,o)=>{if("AI_RESPONSE_RESULT"===e.type){const t=document.getElementById(n),r=t?.shadowRoot;if(r){f(r,!1);const n=e.data;n?.success&&n.aiResponse?(p=n.aiResponse,x(r,n.aiResponse),"number"==typeof n.creditsRemaining&&m(r,n.creditsRemaining)):h(r,n?.error||"Failed to generate reply.")}o({success:!0})}return!1}),document.addEventListener("mouseup",v=>{const w=document.getElementById(n);if(w&&w.contains(v.target))return;const E=document.getElementById(e);E&&E.contains(v.target)||setTimeout(()=>{const v=window.getSelection(),w=v?.toString().trim()||"";if(w.length>10){i=w;try{!function(v){const w=function(){const v=document.getElementById(e);if(v)return v;const w=document.createElement("div");return w.id=e,w.title="Generate reply with Bolt Reply AI",w.innerHTML=`<img src="${o}" style="width:40px;height:40px;border-radius:50%;display:block;pointer-events:none;" alt="Bolt Reply AI" />`,w.style.cssText="\n      position: fixed;\n      z-index: 2147483647;\n      display: none;\n      width: 40px;\n      height: 40px;\n      border-radius: 50%;\n      background: transparent;\n      box-shadow: 0 2px 12px rgba(0,0,0,0.25);\n      cursor: pointer;\n      transition: transform 0.1s, box-shadow 0.15s;\n      user-select: none;\n    ",w.addEventListener("mouseenter",()=>{w.style.transform="scale(1.1)",w.style.boxShadow="0 4px 16px rgba(0,0,0,0.35)"}),w.addEventListener("mouseleave",()=>{w.style.transform="scale(1)",w.style.boxShadow="0 2px 12px rgba(0,0,0,0.25)"}),w.addEventListener("mousedown",n=>{n.preventDefault()}),w.addEventListener("click",()=>{const e=i;g(),function(e){const o=function(){let e=document.getElementById(n);return e&&e.shadowRoot?e.shadowRoot:(e=document.createElement("div"),e.id=n,e.style.cssText="\n      position: fixed;\n      top: 0;\n      right: 0;\n      width: 0;\n      height: 0;\n      z-index: 2147483646;\n      pointer-events: none;\n    ",document.body.appendChild(e),e.attachShadow({mode:"open"}))}();(function(n){n.innerHTML="";const e=document.createElement("style");e.textContent='\n      *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }\n\n      :host { all: initial; }\n\n      .panel {\n        position: fixed;\n        top: 0;\n        right: 0;\n        width: 360px;\n        height: 100vh;\n        background: #ffffff;\n        border-left: 1px solid #e2e8f0;\n        box-shadow: -4px 0 24px rgba(0,0,0,0.12);\n        display: flex;\n        flex-direction: column;\n        font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, sans-serif;\n        font-size: 14px;\n        color: #1a202c;\n        transform: translateX(100%);\n        transition: transform 0.25s cubic-bezier(0.4, 0, 0.2, 1);\n        pointer-events: all;\n        overflow: hidden;\n      }\n      .panel.open { transform: translateX(0); }\n\n      /* Header */\n      .header {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        padding: 14px 16px;\n        border-bottom: 1px solid #e2e8f0;\n        background: #f8fafc;\n        flex-shrink: 0;\n      }\n      .header-logo {\n        display: flex;\n        align-items: center;\n      }\n      .header-logo img {\n        height: 28px;\n        width: auto;\n        object-fit: contain;\n        display: block;\n      }\n      .close-btn {\n        background: none;\n        border: none;\n        cursor: pointer;\n        color: #64748b;\n        padding: 4px;\n        border-radius: 4px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        transition: background 0.15s, color 0.15s;\n        line-height: 1;\n      }\n      .close-btn:hover { background: #f1f5f9; color: #1a202c; }\n\n      /* Body */\n      .body {\n        flex: 1;\n        overflow-y: auto;\n        padding: 16px;\n        display: flex;\n        flex-direction: column;\n        gap: 14px;\n      }\n\n      /* Credits badge */\n      .credits-badge {\n        display: inline-flex;\n        align-items: center;\n        gap: 5px;\n        font-size: 12px;\n        color: #64748b;\n        background: #f1f5f9;\n        border: 1px solid #e2e8f0;\n        border-radius: 20px;\n        padding: 3px 10px;\n        font-weight: 500;\n        align-self: flex-end;\n      }\n      .credits-badge .dot {\n        width: 6px;\n        height: 6px;\n        border-radius: 50%;\n        background: hsl(217, 91%, 60%);\n        flex-shrink: 0;\n      }\n\n      /* Form sections */\n      .field { display: flex; flex-direction: column; gap: 5px; }\n      .label {\n        font-size: 12px;\n        font-weight: 600;\n        color: #374151;\n        text-transform: uppercase;\n        letter-spacing: 0.04em;\n      }\n      input[type="text"], textarea {\n        width: 100%;\n        border: 1px solid #d1d5db;\n        border-radius: 6px;\n        padding: 8px 10px;\n        font-size: 13px;\n        font-family: inherit;\n        color: #1a202c;\n        background: #fff;\n        resize: vertical;\n        transition: border-color 0.15s, box-shadow 0.15s;\n        outline: none;\n      }\n      input[type="text"]:focus, textarea:focus {\n        border-color: hsl(217, 91%, 60%);\n        box-shadow: 0 0 0 3px hsla(217, 91%, 60%, 0.15);\n      }\n      textarea { min-height: 135px; }\n\n      .result-area {\n        width: 100%;\n        border: 1px solid #d1d5db;\n        border-radius: 6px;\n        padding: 8px 10px;\n        font-size: 13px;\n        font-family: inherit;\n        color: #1a202c;\n        background: #f8fafc;\n        white-space: pre-wrap;\n        word-break: break-word;\n        line-height: 1.55;\n        user-select: none;\n        cursor: default;\n      }\n\n      /* Stars */\n      .stars { display: flex; gap: 4px; }\n      .star {\n        font-size: 22px;\n        cursor: pointer;\n        color: #d1d5db;\n        line-height: 1;\n        transition: color 0.1s, transform 0.1s;\n        user-select: none;\n      }\n      .star.filled { color: #f59e0b; }\n      .star:hover { transform: scale(1.15); }\n\n      /* Buttons */\n      .btn {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        gap: 7px;\n        padding: 9px 16px;\n        border: none;\n        border-radius: 7px;\n        font-size: 13px;\n        font-weight: 600;\n        font-family: inherit;\n        cursor: pointer;\n        transition: background 0.15s, opacity 0.15s, transform 0.1s;\n        outline: none;\n        width: 100%;\n      }\n      .btn:active { transform: scale(0.98); }\n      .btn-primary {\n        background: hsl(217, 91%, 60%);\n        color: #fff;\n      }\n      .btn-primary:hover:not(:disabled) { background: hsl(217, 91%, 50%); }\n      .btn-primary:disabled {\n        opacity: 0.6;\n        cursor: not-allowed;\n      }\n      .btn-secondary {\n        background: #f1f5f9;\n        color: #374151;\n        border: 1px solid #e2e8f0;\n      }\n      .btn-secondary:hover { background: #e2e8f0; }\n\n      /* Result section */\n      .result-section {\n        display: flex;\n        flex-direction: column;\n        gap: 8px;\n        padding-top: 4px;\n        border-top: 1px solid #e2e8f0;\n      }\n      .result-label {\n        font-size: 12px;\n        font-weight: 600;\n        color: #374151;\n        text-transform: uppercase;\n        letter-spacing: 0.04em;\n      }\n\n      /* Error / info message */\n      .message-box {\n        padding: 10px 12px;\n        border-radius: 6px;\n        font-size: 12px;\n        font-weight: 500;\n        line-height: 1.5;\n      }\n      .message-box.error { background: #fef2f2; color: #b91c1c; border: 1px solid #fecaca; }\n      .message-box.info  { background: #eff6ff; color: #1d4ed8; border: 1px solid #bfdbfe; }\n\n      /* Spinner */\n      @keyframes spin { to { transform: rotate(360deg); } }\n      .spinner {\n        width: 14px;\n        height: 14px;\n        border: 2px solid rgba(255,255,255,0.4);\n        border-top-color: #fff;\n        border-radius: 50%;\n        animation: spin 0.7s linear infinite;\n        flex-shrink: 0;\n      }\n\n      /* Divider */\n      .divider { height: 1px; background: #e2e8f0; margin: 2px 0; }\n    ',n.appendChild(e);const o=document.createElement("div");o.className="panel",o.id="boltreply-panel",o.innerHTML=`\n      <div class="header">\n        <div class="header-logo">\n          <img src="${r}" alt="Bolt Reply AI" />\n        </div>\n        <button class="close-btn" id="br-close" title="Close panel">\n          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">\n            <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>\n          </svg>\n        </button>\n      </div>\n\n      <div class="body">\n\n        <div class="credits-badge">\n          <span class="dot"></span>\n          <span id="br-credits">Loading credits...</span>\n        </div>\n\n        <div class="field">\n          <span class="label">Reviewer Name</span>\n          <input type="text" id="br-name" placeholder="Customer name (optional)" />\n        </div>\n\n        <div class="field">\n          <span class="label">Star Rating</span>\n          <div class="stars" id="br-stars">\n            <span class="star" data-value="1">&#9733;</span>\n            <span class="star" data-value="2">&#9733;</span>\n            <span class="star" data-value="3">&#9733;</span>\n            <span class="star" data-value="4">&#9733;</span>\n            <span class="star" data-value="5">&#9733;</span>\n          </div>\n        </div>\n\n        <div class="field">\n          <span class="label">Review Text</span>\n          <textarea id="br-review" placeholder="Paste or type the customer review here..."></textarea>\n        </div>\n\n        <div id="br-error-box" style="display:none;"></div>\n\n        <button class="btn btn-primary" id="br-generate">\n          ${t}\n          <span id="br-btn-label">Generate Reply</span>\n        </button>\n\n        <div class="divider"></div>\n\n        <div class="result-section" id="br-result-section" style="display:none;">\n          <span class="result-label">Generated Reply</span>\n          <div class="result-area" id="br-result"></div>\n          <button class="btn btn-secondary" id="br-copy">\n            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n              <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>\n            </svg>\n            Copy to Clipboard\n          </button>\n        </div>\n\n      </div>\n    `,n.appendChild(o),function(n){n.getElementById("br-close")?.addEventListener("click",b);const e=n.getElementById("br-stars");e?.addEventListener("click",e=>{const t=e.target,o=parseInt(t.getAttribute("data-value")||"0",10);o&&function(n,e){l=e,u(n,e)}(n,o)}),e?.addEventListener("mouseover",e=>{const t=e.target,o=parseInt(t.getAttribute("data-value")||"0",10);o&&u(n,o)}),e?.addEventListener("mouseleave",()=>{u(n,l)});const t=n.getElementById("br-name");t?.addEventListener("input",()=>{d=t.value});const o=n.getElementById("br-review");o?.addEventListener("input",()=>{c=o.value}),n.getElementById("br-generate")?.addEventListener("click",()=>{!function(n){if(s)return;const e=n.getElementById("br-name"),t=n.getElementById("br-review"),o=e?.value.trim()||void 0,r=t?.value.trim()||"";(function(n){const e=n.getElementById("br-error-box");e&&(e.style.display="none")})(n),r?chrome.runtime.sendMessage({type:"GET_AUTH_STATUS"},e=>{if(chrome.runtime.lastError||!e?.isAuthenticated)return void h(n,"Please log in via the Bolt Reply extension icon first.");f(n,!0);const t={review_text:r,reviewer_name:o,review_rating:l||void 0,website_url:window.location.href,source_platform:window.location.hostname};chrome.runtime.sendMessage({type:"GENERATE_AI_RESPONSE",data:{reviewData:t}},e=>{if(chrome.runtime.lastError)return f(n,!1),void h(n,"Connection error. Please try again.");f(n,!1),e?.success&&e.aiResponse?(p=e.aiResponse,x(n,e.aiResponse),"number"==typeof e.creditsRemaining&&m(n,e.creditsRemaining)):h(n,e?.error||"Failed to generate reply. Please try again.")})}):h(n,"Please enter the review text before generating a reply.")}(n)}),n.getElementById("br-copy")?.addEventListener("click",()=>{y(n)})}(n)})(o),c=e||c;const i=o.getElementById("br-name"),g=o.getElementById("br-review");i&&(i.value=d),g&&(g.value=c),u(o,l),p&&x(o,p),function(n){const e=n.getElementById("br-credits");e&&chrome.storage.local.get(["credits_remaining"],n=>{if(chrome.runtime.lastError)return;const t=n.credits_remaining;e.textContent="number"==typeof t?`${t} credits remaining`:"Credits unavailable"})}(o),requestAnimationFrame(()=>{const n=o.getElementById("boltreply-panel");n&&n.classList.add("open"),a=!0})}(e)}),document.body.appendChild(w),w}();let E=v.top-40-8,k=v.right-40;E<8&&(E=v.bottom+8),k=Math.max(8,Math.min(k,window.innerWidth-40-8)),w.style.top=`${E}px`,w.style.left=`${k}px`,w.style.display="flex"}(v.getRangeAt(0).getBoundingClientRect())}catch{g()}}else g()},10)}),document.addEventListener("selectionchange",()=>{const n=window.getSelection();!n||n.toString().trim().length}),document.addEventListener("keydown",n=>{"Escape"===n.key&&(g(),a&&b())}),document.addEventListener("click",t=>{const o=document.getElementById(n),r=document.getElementById(e),i=t.target;if(o?.contains(i)||r?.contains(i))return;const s=window.getSelection();(!s||s.toString().trim().length<=10)&&g()})})()})();
//# sourceMappingURL=universal-content-script.js.map